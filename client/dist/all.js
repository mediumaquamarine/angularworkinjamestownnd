"use strict";!function(){angular.module("work",["auth0.lock","angular-jwt","ui.router"])}();
"use strict";!function(){angular.module("work").run(["$rootScope","authService","lock","authManager",function(e,t,r,n){e.authService=t,t.registerAuthenticationListener(),n.checkAuthOnRefresh(),r.interceptHash()}])}();
"use strict";!function(){angular.module("work").controller("MainController",["$rootScope","authService","userdata","$state","$window","companydata",function(e,t,o,a,i,n){e.isAuthenticated||i.localStorage.clear();var r=this;r.latestReviews,r.profile,t.getProfileDeferred().then(function(e){r.profile=e}).then(function(){o.getData(r.profile.user_id)}),r.cavendish=function(){i.localStorage.company="Cavendish",a.go("reviews")},n.getLatestReviews()}])}();
"use strict";!function(){angular.module("work").controller("NavbarController",["$rootScope","authService","$state","$window",function(o,r,t,e){var a=this;a.authService=r}])}();
"use strict";!function(){angular.module("work").controller("ReviewController",["$rootScope","authService","userdata","$state","$window","companydata","$http","$sce",function(e,t,r,o,a,i,n,s){var c=this;c.company=a.localStorage.company,c.reviews=c.reviews||"Be the first to review",c.authors,c.rating,c.trustAsHtml=s.trustAsHtml,c.writeAReview=i.signInOrWrite,n.post("api/reviews",{companyName:c.company}).then(function(e){c.reviews=e.data.reviews})}])}();
"use strict";!function(){angular.module("work").controller("WriteReviewController",["$rootScope","authService","userdata","$state","$window","companydata","writefac",function(t,e,o,a,i,r,n){t.isAuthenticated||a.go("home");var c=this;c.company=i.localStorage.company,c.review,c.rating,c.submit=n.submitReview}])}();
"use strict";!function(){angular.module("work").factory("writefac",["$rootScope","authService","userdata","$state","$window","companydata","$http","$timeout",function(e,t,a,r,i,o,n,s){function c(){var e=JSON.parse(i.localStorage.userProfile).userid,t=i.localStorage.company,a=JSON.parse(i.localStorage.profile).name;n.post("api/writereview",{userid:e,companyName:t,review:this.review,author:a,rating:this.rating}).then(function(e){"success"===e.data&&r.go("reviews")}),this.review="",this.rating=""}return{submitReview:c}}])}();
"use strict";!function(){angular.module("work").config(["$stateProvider","lockProvider","$urlRouterProvider","jwtOptionsProvider",function(e,t,r,i){r.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"../../templates/main/index.html",controller:"MainController as main"}).state("reviews",{url:"/reviews",templateUrl:"../../templates/reviews/reviews.html",controller:"ReviewController as review"}).state("writereview",{url:"/writereview",templateUrl:"../../templates/writereview/writereview.html",controller:"WriteReviewController as write"}),t.init({clientID:"Q7K0Q6Ip5I4zprAqHBCtfA5EMUbkxJce",domain:"easyismath.auth0.com",options:{theme:{logo:"../../content/easyismathsmall.png"},languageDictionary:{title:"Ready for adventure?"}}}),i.config({tokenGetter:function(){return localStorage.getItem("id_token")}})}])}();
"use strict";!function(){function e(e,t,o,r){function n(){return c.promise}function i(){t.show()}function l(){localStorage.removeItem("id_token"),localStorage.removeItem("profile"),localStorage.removeItem("userProfile"),r.userStuff="",o.unauthenticate()}function a(){t.on("authenticated",function(e){t.getProfile(e.idToken,function(e,t){return e?console.log(e):(localStorage.setItem("profile",JSON.stringify(t)),void c.resolve(t))}),localStorage.setItem("id_token",e.idToken),o.authenticate()})}var u=JSON.parse(localStorage.getItem("profile"))||null,c=e.defer();return u&&c.resolve(u),{login:i,logout:l,registerAuthenticationListener:a,getProfileDeferred:n}}angular.module("work").service("authService",e),e.$inject=["$q","lock","authManager","$rootScope"]}();
"use strict";!function(){angular.module("work").factory("companydata",["$http","$rootScope","$window","authService","$state",function(t,e,i,n,a){var o=function(){t.get("api/lastreviews",{}).then(function(t){e.latestReviews=t.data[0]})},r=function(){e.isAuthenticated?a.go("writereview"):n.login()};return{getLatestReviews:o,signInOrWrite:r}}])}();
"use strict";!function(){angular.module("work").factory("userdata",["$http","$rootScope","$window",function(t,a,e){var o=function(o){t.post("api/data",{id:o}).then(function(t){a.userStuff=t.data,a.isAuthenticated&&e.localStorage.setItem("userProfile",JSON.stringify(t.data))})};return{getData:o}}])}();